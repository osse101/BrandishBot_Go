?   	github.com/osse101/BrandishBot_Go/cmd/app	[no test files]
?   	github.com/osse101/BrandishBot_Go/cmd/debug	[no test files]
?   	github.com/osse101/BrandishBot_Go/cmd/reset	[no test files]
?   	github.com/osse101/BrandishBot_Go/cmd/setup	[no test files]
?   	github.com/osse101/BrandishBot_Go/internal/config	[no test files]
?   	github.com/osse101/BrandishBot_Go/internal/database	[no test files]
=== RUN   TestUserRepository_Integration
2025/11/24 12:25:18 github.com/testcontainers/testcontainers-go - Connected to docker: 
  Server Version: 29.0.1
  API Version: 1.51
  Operating System: Docker Desktop
  Total Memory: 15861 MB
  Labels:
    com.docker.desktop.address=unix:///var/run/docker-cli.sock
  Testcontainers for Go Version: v0.40.0
  Resolved Docker Host: unix:///var/run/docker.sock
  Resolved Docker Socket Path: /var/run/docker.sock
  Test SessionID: 749f4b25e4c291bb074afc3887a6a49fc49104a31aa8feebbe1672a92d5a4a69
  Test ProcessID: e386c2fe-fd62-43bc-abaa-d5ad1dc62f18
2025/11/24 12:25:18 üê≥ Creating container for image postgres:15-alpine
2025/11/24 12:25:19 üê≥ Creating container for image testcontainers/ryuk:0.13.0
2025/11/24 12:25:19 ‚úÖ Container created: 96738d35155b
2025/11/24 12:25:19 üê≥ Starting container: 96738d35155b
2025/11/24 12:25:19 ‚úÖ Container started: 96738d35155b
2025/11/24 12:25:19 ‚è≥ Waiting for container id 96738d35155b image: testcontainers/ryuk:0.13.0. Waiting for: port 8080/tcp to be listening
2025/11/24 12:25:19 Shell not found in container
2025/11/24 12:25:19 üîî Container is ready: 96738d35155b
2025/11/24 12:25:19 ‚úÖ Container created: ec82f9af9bc1
2025/11/24 12:25:19 üê≥ Starting container: ec82f9af9bc1
2025/11/24 12:25:19 ‚úÖ Container started: ec82f9af9bc1
2025/11/24 12:25:19 ‚è≥ Waiting for container id ec82f9af9bc1 image: postgres:15-alpine. Waiting for: all of: [log message "database system is ready to accept connections" (occurrence: 2)]
2025/11/24 12:25:20 üîî Container is ready: ec82f9af9bc1
2025/11/24 12:25:20 Successfully connected to the database
=== RUN   TestUserRepository_Integration/UpsertUser
=== RUN   TestUserRepository_Integration/Inventory_Operations
=== RUN   TestUserRepository_Integration/Transaction_Support
=== RUN   TestUserRepository_Integration/Recipe_Operations
=== RUN   TestUserRepository_Integration/Item_Buyability
    integration_test.go:266: money is not buyable (may be expected depending on migrations)
=== RUN   TestUserRepository_Integration/GetSellablePrices
=== RUN   TestUserRepository_Integration/GetItemByID
=== RUN   TestUserRepository_Integration/GetUserByUsername_-_Not_Found
=== RUN   TestUserRepository_Integration/GetUserByPlatformID
2025/11/24 12:25:21 üê≥ Stopping container: ec82f9af9bc1
2025/11/24 12:25:21 ‚úÖ Container stopped: ec82f9af9bc1
2025/11/24 12:25:21 üê≥ Terminating container: ec82f9af9bc1
2025/11/24 12:25:21 üö´ Container terminated: ec82f9af9bc1
--- PASS: TestUserRepository_Integration (2.46s)
    --- PASS: TestUserRepository_Integration/UpsertUser (0.00s)
    --- PASS: TestUserRepository_Integration/Inventory_Operations (0.00s)
    --- PASS: TestUserRepository_Integration/Transaction_Support (0.00s)
    --- PASS: TestUserRepository_Integration/Recipe_Operations (0.00s)
    --- PASS: TestUserRepository_Integration/Item_Buyability (0.00s)
    --- PASS: TestUserRepository_Integration/GetSellablePrices (0.00s)
    --- PASS: TestUserRepository_Integration/GetItemByID (0.00s)
    --- PASS: TestUserRepository_Integration/GetUserByUsername_-_Not_Found (0.00s)
    --- PASS: TestUserRepository_Integration/GetUserByPlatformID (0.00s)
=== RUN   TestStatsRepository_Integration
2025/11/24 12:25:21 üê≥ Creating container for image postgres:15-alpine
2025/11/24 12:25:21 ‚úÖ Container created: 5fbba5ec0f2f
2025/11/24 12:25:21 üê≥ Starting container: 5fbba5ec0f2f
2025/11/24 12:25:21 ‚úÖ Container started: 5fbba5ec0f2f
2025/11/24 12:25:21 ‚è≥ Waiting for container id 5fbba5ec0f2f image: postgres:15-alpine. Waiting for: all of: [log message "database system is ready to accept connections" (occurrence: 2)]
2025/11/24 12:25:22 üîî Container is ready: 5fbba5ec0f2f
2025/11/24 12:25:22 Successfully connected to the database
=== RUN   TestStatsRepository_Integration/RecordEvent
=== RUN   TestStatsRepository_Integration/GetEventsByUser
=== RUN   TestStatsRepository_Integration/GetEventsByType
=== RUN   TestStatsRepository_Integration/GetTopUsers
=== RUN   TestStatsRepository_Integration/GetEventCounts
=== RUN   TestStatsRepository_Integration/GetUserEventCounts
=== RUN   TestStatsRepository_Integration/GetTotalEventCount
=== RUN   TestStatsRepository_Integration/TimeRangeFiltering
2025/11/24 12:25:22 üê≥ Stopping container: 5fbba5ec0f2f
2025/11/24 12:25:23 ‚úÖ Container stopped: 5fbba5ec0f2f
2025/11/24 12:25:23 üê≥ Terminating container: 5fbba5ec0f2f
2025/11/24 12:25:23 üö´ Container terminated: 5fbba5ec0f2f
--- PASS: TestStatsRepository_Integration (1.86s)
    --- PASS: TestStatsRepository_Integration/RecordEvent (0.00s)
    --- PASS: TestStatsRepository_Integration/GetEventsByUser (0.00s)
    --- PASS: TestStatsRepository_Integration/GetEventsByType (0.00s)
    --- PASS: TestStatsRepository_Integration/GetTopUsers (0.00s)
    --- PASS: TestStatsRepository_Integration/GetEventCounts (0.00s)
    --- PASS: TestStatsRepository_Integration/GetUserEventCounts (0.00s)
    --- PASS: TestStatsRepository_Integration/GetTotalEventCount (0.00s)
    --- PASS: TestStatsRepository_Integration/TimeRangeFiltering (0.00s)
PASS
ok  	github.com/osse101/BrandishBot_Go/internal/database/postgres	4.335s
?   	github.com/osse101/BrandishBot_Go/internal/domain	[no test files]
?   	github.com/osse101/BrandishBot_Go/internal/handler	[no test files]
?   	github.com/osse101/BrandishBot_Go/internal/logger	[no test files]
?   	github.com/osse101/BrandishBot_Go/internal/repository	[no test files]
?   	github.com/osse101/BrandishBot_Go/internal/server	[no test files]
=== RUN   TestConcurrency_RecordUserEvent
--- PASS: TestConcurrency_RecordUserEvent (0.00s)
=== RUN   TestRecordUserEvent
--- PASS: TestRecordUserEvent (0.00s)
=== RUN   TestRecordUserEventEmptyUserID
--- PASS: TestRecordUserEventEmptyUserID (0.00s)
=== RUN   TestGetUserStats
--- PASS: TestGetUserStats (0.00s)
=== RUN   TestGetSystemStats
--- PASS: TestGetSystemStats (0.00s)
=== RUN   TestGetLeaderboard
--- PASS: TestGetLeaderboard (0.00s)
PASS
ok  	github.com/osse101/BrandishBot_Go/internal/stats	0.004s
=== RUN   TestConcurrency_AddItem
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO AddItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:18 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:19 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO Item added successfully username=alice item=lootbox1 quantity=1
--- PASS: TestConcurrency_AddItem (2.12s)
=== RUN   TestConcurrency_BuyItem
2025/11/24 12:25:20 INFO AddItem called username=alice item=money quantity=100
2025/11/24 12:25:20 INFO Item added successfully username=alice item=money quantity=100
2025/11/24 12:25:20 INFO BuyItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO BuyItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO BuyItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO BuyItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO BuyItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO BuyItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO BuyItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO BuyItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO BuyItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:20 INFO BuyItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:21 INFO Item purchased username=alice item=lootbox1 quantity=1
2025/11/24 12:25:21 INFO Item purchased username=alice item=lootbox1 quantity=1
2025/11/24 12:25:21 WARN Insufficient funds username=alice
2025/11/24 12:25:21 WARN Insufficient funds username=alice
2025/11/24 12:25:21 WARN Insufficient funds username=alice
2025/11/24 12:25:21 WARN Insufficient funds username=alice
2025/11/24 12:25:21 WARN Insufficient funds username=alice
2025/11/24 12:25:21 WARN Insufficient funds username=alice
2025/11/24 12:25:21 WARN Insufficient funds username=alice
2025/11/24 12:25:21 WARN Insufficient funds username=alice
--- PASS: TestConcurrency_BuyItem (0.08s)
=== RUN   TestAddItem
2025/11/24 12:25:21 INFO AddItem called username=alice item=lootbox1 quantity=5
2025/11/24 12:25:21 INFO Item added successfully username=alice item=lootbox1 quantity=5
2025/11/24 12:25:21 INFO AddItem called username=alice item=lootbox1 quantity=3
2025/11/24 12:25:21 INFO Item added successfully username=alice item=lootbox1 quantity=3
2025/11/24 12:25:21 INFO AddItem called username=alice item=lootbox2 quantity=2
2025/11/24 12:25:21 INFO Item added successfully username=alice item=lootbox2 quantity=2
--- PASS: TestAddItem (0.00s)
=== RUN   TestRemoveItem
2025/11/24 12:25:21 INFO AddItem called username=alice item=lootbox1 quantity=10
2025/11/24 12:25:21 INFO Item added successfully username=alice item=lootbox1 quantity=10
2025/11/24 12:25:21 INFO RemoveItem called username=alice item=lootbox1 quantity=3
2025/11/24 12:25:21 INFO Item removed username=alice item=lootbox1 removed=3
2025/11/24 12:25:21 INFO RemoveItem called username=alice item=lootbox1 quantity=100
2025/11/24 12:25:21 INFO Item removed username=alice item=lootbox1 removed=7
2025/11/24 12:25:21 INFO RemoveItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:21 WARN Item not in inventory itemName=lootbox1
--- PASS: TestRemoveItem (0.00s)
=== RUN   TestGiveItem
2025/11/24 12:25:21 INFO AddItem called username=alice item=lootbox1 quantity=10
2025/11/24 12:25:21 INFO Item added successfully username=alice item=lootbox1 quantity=10
2025/11/24 12:25:21 INFO GiveItem called owner=alice receiver=bob item=lootbox1 quantity=3
2025/11/24 12:25:21 INFO Item transferred owner=alice receiver=bob item=lootbox1 quantity=3
2025/11/24 12:25:21 INFO GiveItem called owner=alice receiver=bob item=lootbox1 quantity=100
--- PASS: TestGiveItem (0.00s)
=== RUN   TestSellItem
2025/11/24 12:25:21 INFO AddItem called username=alice item=lootbox1 quantity=10
2025/11/24 12:25:21 INFO Item added successfully username=alice item=lootbox1 quantity=10
2025/11/24 12:25:21 INFO SellItem called username=alice item=lootbox1 quantity=3
2025/11/24 12:25:21 INFO Item sold username=alice item=lootbox1 quantity=3 moneyGained=150
2025/11/24 12:25:21 INFO SellItem called username=alice item=lootbox1 quantity=100
2025/11/24 12:25:21 INFO Item sold username=alice item=lootbox1 quantity=7 moneyGained=350
--- PASS: TestSellItem (0.00s)
=== RUN   TestSellItem_NotInInventory
2025/11/24 12:25:21 INFO SellItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:21 WARN Item not in inventory itemName=lootbox1
--- PASS: TestSellItem_NotInInventory (0.00s)
=== RUN   TestRegisterUser
2025/11/24 12:25:21 INFO RegisterUser called username=charlie
2025/11/24 12:25:21 INFO User registered user_id=user-charlie username=charlie
--- PASS: TestRegisterUser (0.00s)
=== RUN   TestHandleIncomingMessage_NewUser
2025/11/24 12:25:21 INFO HandleIncomingMessage called platform=twitch platformID=newuser123 username=newuser
2025/11/24 12:25:21 INFO RegisterUser called username=newuser
2025/11/24 12:25:21 INFO User registered user_id=user-newuser username=newuser
2025/11/24 12:25:21 INFO New user registered username=newuser
--- PASS: TestHandleIncomingMessage_NewUser (0.00s)
=== RUN   TestHandleIncomingMessage_ExistingUser
2025/11/24 12:25:21 INFO HandleIncomingMessage called platform=twitch platformID=alice123 username=alice
2025/11/24 12:25:21 INFO Existing user found userID=user-alice
--- PASS: TestHandleIncomingMessage_ExistingUser (0.00s)
=== RUN   TestBuyItem
2025/11/24 12:25:21 INFO AddItem called username=alice item=money quantity=500
2025/11/24 12:25:21 INFO Item added successfully username=alice item=money quantity=500
2025/11/24 12:25:21 INFO BuyItem called username=alice item=lootbox1 quantity=2
2025/11/24 12:25:21 INFO Item purchased username=alice item=lootbox1 quantity=2
2025/11/24 12:25:21 INFO BuyItem called username=alice item=lootbox1 quantity=10
2025/11/24 12:25:21 INFO Adjusted purchase quantity due to funds requested=10 actual=8
2025/11/24 12:25:21 INFO Item purchased username=alice item=lootbox1 quantity=8
2025/11/24 12:25:21 INFO BuyItem called username=alice item=lootbox1 quantity=1
2025/11/24 12:25:21 WARN Insufficient funds username=alice
2025/11/24 12:25:21 INFO BuyItem called username=alice item=lootbox2 quantity=1
2025/11/24 12:25:21 WARN Item not buyable itemName=lootbox2
--- PASS: TestBuyItem (0.00s)
=== RUN   TestUseItem
2025/11/24 12:25:21 INFO AddItem called username=alice item=lootbox1 quantity=5
2025/11/24 12:25:21 INFO Item added successfully username=alice item=lootbox1 quantity=5
2025/11/24 12:25:21 INFO UseItem called username=alice item=lootbox1 quantity=1 target=""
2025/11/24 12:25:21 INFO handleLootbox1 called quantity=1
2025/11/24 12:25:21 INFO lootbox1 consumed, lootbox0 granted quantity=1
2025/11/24 12:25:21 INFO Item used username=alice item=lootbox1 quantity=1 message="Used 1 lootbox1"
2025/11/24 12:25:21 INFO UseItem called username=alice item=lootbox1 quantity=10 target=""
2025/11/24 12:25:21 WARN Insufficient quantity itemName=lootbox1 available=4 required=10
2025/11/24 12:25:21 INFO UseItem called username=alice item=unknown_item quantity=1 target=""
2025/11/24 12:25:21 WARN Item not found itemName=unknown_item
2025/11/24 12:25:21 INFO AddItem called username=alice item=money quantity=1
2025/11/24 12:25:21 INFO Item added successfully username=alice item=money quantity=1
2025/11/24 12:25:21 INFO UseItem called username=alice item=money quantity=1 target=""
2025/11/24 12:25:21 WARN No handler for item itemName=money
--- PASS: TestUseItem (0.00s)
=== RUN   TestUseItem_Blaster
2025/11/24 12:25:21 INFO AddItem called username=alice item=blaster quantity=5
2025/11/24 12:25:21 INFO Item added successfully username=alice item=blaster quantity=5
2025/11/24 12:25:21 INFO UseItem called username=alice item=blaster quantity=2 target=bob
2025/11/24 12:25:21 INFO handleBlaster called quantity=2
2025/11/24 12:25:21 INFO TimeoutUser called username=bob duration=1m0s reason="Blasted by alice"
2025/11/24 12:25:21 INFO User timed out username=bob duration=1m0s
2025/11/24 12:25:21 INFO blaster used target=bob quantity=2
2025/11/24 12:25:21 INFO Item used username=alice item=blaster quantity=2 message="alice has BLASTED bob 2 times! They are timed out for 1m0s."
2025/11/24 12:25:21 INFO UseItem called username=alice item=blaster quantity=1 target=""
2025/11/24 12:25:21 INFO handleBlaster called quantity=1
2025/11/24 12:25:21 WARN target username missing for blaster
2025/11/24 12:25:21 ERROR Handler error error="target username is required for blaster" itemName=blaster
--- PASS: TestUseItem_Blaster (0.00s)
=== RUN   TestGetInventory
2025/11/24 12:25:21 INFO AddItem called username=alice item=lootbox1 quantity=2
2025/11/24 12:25:21 INFO Item added successfully username=alice item=lootbox1 quantity=2
2025/11/24 12:25:21 INFO AddItem called username=alice item=money quantity=100
2025/11/24 12:25:21 INFO Item added successfully username=alice item=money quantity=100
2025/11/24 12:25:21 INFO GetInventory called username=alice
2025/11/24 12:25:21 INFO Inventory retrieved username=alice itemCount=2
--- PASS: TestGetInventory (0.00s)
=== RUN   TestUseItem_Lootbox0
2025/11/24 12:25:21 INFO AddItem called username=alice item=lootbox0 quantity=1
2025/11/24 12:25:21 INFO Item added successfully username=alice item=lootbox0 quantity=1
2025/11/24 12:25:21 INFO UseItem called username=alice item=lootbox0 quantity=1 target=""
2025/11/24 12:25:21 INFO handleLootbox0 called quantity=1
2025/11/24 12:25:21 INFO lootbox0 consumed quantity=1
2025/11/24 12:25:21 INFO Item used username=alice item=lootbox0 quantity=1 message="The lootbox was empty!"
--- PASS: TestUseItem_Lootbox0 (0.00s)
=== RUN   TestUseItem_Lootbox2
2025/11/24 12:25:21 INFO AddItem called username=alice item=lootbox2 quantity=1
2025/11/24 12:25:21 INFO Item added successfully username=alice item=lootbox2 quantity=1
2025/11/24 12:25:21 INFO UseItem called username=alice item=lootbox2 quantity=1 target=""
2025/11/24 12:25:21 INFO handleLootbox2 called quantity=1
2025/11/24 12:25:21 INFO lootbox2 consumed, lootbox1 granted quantity=1
2025/11/24 12:25:21 INFO Item used username=alice item=lootbox2 quantity=1 message="Used 1 lootbox2"
--- PASS: TestUseItem_Lootbox2 (0.00s)
=== RUN   TestTimeoutUser
2025/11/24 12:25:21 INFO TimeoutUser called username=alice duration=100ms reason="Test reason"
2025/11/24 12:25:21 INFO User timed out username=alice duration=100ms
2025/11/24 12:25:21 INFO TimeoutUser called username=alice duration=200ms reason="Overwrite reason"
2025/11/24 12:25:21 INFO Existing timeout cancelled username=alice
2025/11/24 12:25:21 INFO User timed out username=alice duration=200ms
--- PASS: TestTimeoutUser (0.00s)
=== RUN   TestHandleBlaster_Timeout
2025/11/24 12:25:21 INFO AddItem called username=alice item=blaster quantity=1
2025/11/24 12:25:21 INFO Item added successfully username=alice item=blaster quantity=1
2025/11/24 12:25:21 INFO UseItem called username=alice item=blaster quantity=1 target=bob
2025/11/24 12:25:21 INFO handleBlaster called quantity=1
2025/11/24 12:25:21 INFO TimeoutUser called username=bob duration=1m0s reason="Blasted by alice"
2025/11/24 12:25:21 INFO User timed out username=bob duration=1m0s
2025/11/24 12:25:21 INFO blaster used target=bob quantity=1
2025/11/24 12:25:21 INFO Item used username=alice item=blaster quantity=1 message="alice has BLASTED bob 1 times! They are timed out for 1m0s."
--- PASS: TestHandleBlaster_Timeout (0.00s)
PASS
ok  	github.com/osse101/BrandishBot_Go/internal/user	2.210s
