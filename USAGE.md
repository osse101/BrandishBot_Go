# BrandishBot_Go Usage Documentation

This document outlines how external programs can communicate with `BrandishBot_Go` and describes the structure of the messages exchanged.

## Communication Protocol

`BrandishBot_Go` runs as an HTTP server. External programs communicate with it by sending HTTP POST requests to the exposed endpoints.

-   **Protocol:** HTTP
-   **Method:** POST
-   **Default Port:** 8080 (Configured in `cmd/app/main.go`)
-   **Content-Type:** `application/json`

## Endpoints

### 1. Handle Message

Processes an incoming message from a platform, retrieving or creating the associated user.

-   **URL:** `/message/handle`
-   **Method:** `POST`

#### Request Structure

```json
{
  "platform": "string",    // e.g., "twitch", "youtube", "discord"
  "platform_id": "string", // Unique ID on the platform
  "username": "string"     // Username on the platform
}
```

#### Response Structure

Returns the user object associated with the message.

```json
{
  "internal_id": "string", // UUID generated by BrandishBot
  "username": "string",    // BrandishBot username
  "twitch_id": "string",   // Optional
  "youtube_id": "string",  // Optional
  "discord_id": "string"   // Optional
}
```

### 2. Register / Link User

Registers a new user or links a new platform identity to an existing user.

-   **URL:** `/user/register`
-   **Method:** `POST`

#### Request Structure

```json
{
  "username": "string",          // Required for new users
  "known_platform": "string",    // Platform where the user is already known (or new)
  "known_platform_id": "string", // ID on the known platform
  "new_platform": "string",      // Platform to link
  "new_platform_id": "string"    // ID on the new platform
}
```

#### Response Structure

Returns the updated user object.

```json
{
  "internal_id": "string",
  "username": "string",
  "twitch_id": "string",
  "youtube_id": "string",
  "discord_id": "string"
}
```

### 3. Test Endpoint

A simple endpoint to verify connectivity and basic logic.

-   **URL:** `/test`
-   **Method:** `POST`

#### Request Structure

```json
{
  "username": "string",
  "platform": "string",
  "platform_id": "string"
}
```

#### Response Structure

```json
{
  "message": "Greetings, [Username]!"
}
```
